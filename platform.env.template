# KVSHVL Platform - Environment Variables Template
# Copy this file to .env.local for local development
# For production, set these variables in Vercel/Render dashboards

# ============================================================================
# PLATFORM CONFIGURATION
# ============================================================================

# Application Environment
PLATFORM_APP_NAME="KVSHVL Platform"
PLATFORM_ENVIRONMENT="development"  # development | production
PLATFORM_DEBUG="true"  # Set to false in production
PLATFORM_CORS_ORIGINS="http://localhost:3000,https://kvshvl.in"

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# NextAuth Configuration
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-nextauth-secret-here"  # Generate with: openssl rand -base64 32
AUTH_SECRET="your-auth-secret-here"  # Same as NEXTAUTH_SECRET for NextAuth v5
JWT_ALGORITHM="HS256"

# Platform Secret Keys
PLATFORM_AUTH_SECRET="your-platform-secret-here"
PLATFORM_NEXTAUTH_SECRET="your-nextauth-secret-here"

# Admin Access
PLATFORM_ADMIN_EMAILS="admin@kvshvl.in"

# ============================================================================
# DATABASE CONFIGURATION (UPSTASH POSTGRES)
# ============================================================================

# ASK Database (Upstash Postgres)
ASK_DATABASE_URL="postgresql://user:password@host:port/database"
# Optional: Override database URL completely
ASK_DATABASE_URL_OVERRIDE=""
# Optional: Override password only (keeps other connection details)
ASK_DATABASE_PASSWORD_OVERRIDE=""

# Sketch2BIM Database (Upstash Postgres)
SKETCH2BIM_DATABASE_URL="postgresql://user:password@host:port/database"
SKETCH2BIM_DATABASE_URL_OVERRIDE=""
SKETCH2BIM_DATABASE_PASSWORD_OVERRIDE=""

# Legacy schema variables (backward compatibility - not used with Upstash)
PLATFORM_DATABASE_SCHEMA_ASK="ask_schema"
PLATFORM_DATABASE_SCHEMA_SKETCH2BIM="sketch2bim_schema"

# ============================================================================
# REDIS CONFIGURATION (UPSTASH REDIS)
# ============================================================================

# Shared Upstash Redis (used by all apps)
PLATFORM_UPSTASH_REDIS_REST_URL="https://your-redis-instance.upstash.io"
PLATFORM_UPSTASH_REDIS_REST_TOKEN="your-redis-token"

# App-specific Redis configuration (if using separate instances)
REFRAME_UPSTASH_REDIS_REST_URL="https://your-reframe-redis.upstash.io"
REFRAME_UPSTASH_REDIS_REST_TOKEN="your-reframe-redis-token"

SKETCH2BIM_UPSTASH_REDIS_REST_URL="https://your-sketch2bim-redis.upstash.io"
SKETCH2BIM_UPSTASH_REDIS_REST_TOKEN="your-sketch2bim-redis-token"
SKETCH2BIM_REDIS_URL="redis://localhost:6379/0"

# ============================================================================
# PAYMENT CONFIGURATION (RAZORPAY)
# ============================================================================

# Razorpay API Keys (Platform-wide)
PLATFORM_RAZORPAY_KEY_ID="rzp_test_xxxxx"
PLATFORM_RAZORPAY_KEY_SECRET="your-razorpay-secret"
PLATFORM_RAZORPAY_WEBHOOK_SECRET="your-webhook-secret"

# Razorpay Plan IDs (Created via scripts/create_razorpay_plans.py)
PLATFORM_RAZORPAY_PLAN_WEEK="plan_xxxxx"
PLATFORM_RAZORPAY_PLAN_MONTH="plan_xxxxx"
PLATFORM_RAZORPAY_PLAN_YEAR="plan_xxxxx"

# Pricing in paise (₹1 = 100 paise)
# Week: ₹1,299 = 129900 paise
# Month: ₹3,499 = 349900 paise
# Year: ₹29,999 = 2999900 paise
PLATFORM_RAZORPAY_WEEK_AMOUNT="129900"
PLATFORM_RAZORPAY_MONTH_AMOUNT="349900"
PLATFORM_RAZORPAY_YEAR_AMOUNT="2999900"

# App-specific Razorpay configuration (optional overrides)
ASK_RAZORPAY_KEY_ID="rzp_test_xxxxx"
ASK_RAZORPAY_KEY_SECRET="your-ask-razorpay-secret"
ASK_RAZORPAY_WEBHOOK_SECRET="your-ask-webhook-secret"
ASK_RAZORPAY_PLAN_WEEK="plan_xxxxx"
ASK_RAZORPAY_PLAN_MONTH="plan_xxxxx"
ASK_RAZORPAY_PLAN_YEAR="plan_xxxxx"
ASK_RAZORPAY_WEEK_AMOUNT="129900"
ASK_RAZORPAY_MONTH_AMOUNT="349900"
ASK_RAZORPAY_YEAR_AMOUNT="2999900"

SKETCH2BIM_RAZORPAY_KEY_ID="rzp_test_xxxxx"
SKETCH2BIM_RAZORPAY_KEY_SECRET="your-sketch2bim-razorpay-secret"
SKETCH2BIM_RAZORPAY_WEBHOOK_SECRET="your-sketch2bim-webhook-secret"
SKETCH2BIM_RAZORPAY_PLAN_WEEK="plan_xxxxx"
SKETCH2BIM_RAZORPAY_PLAN_MONTH="plan_xxxxx"
SKETCH2BIM_RAZORPAY_PLAN_YEAR="plan_xxxxx"
SKETCH2BIM_RAZORPAY_WEEK_AMOUNT="129900"
SKETCH2BIM_RAZORPAY_MONTH_AMOUNT="349900"
SKETCH2BIM_RAZORPAY_YEAR_AMOUNT="2999900"

# ============================================================================
# ASK CONFIGURATION
# ============================================================================

# Groq AI Configuration
ASK_GROQ_API_KEY="gsk_xxxxx"
ASK_GROQ_API_BASE="https://api.groq.com/openai/v1"
ASK_GROQ_MODEL="llama-3.1-70b-versatile"

# Monthly cost threshold (in USD)
ASK_GROQ_MONTHLY_COST_THRESHOLD="100"

# Frontend URL
ASK_FRONTEND_URL="http://localhost:3000"

# CORS Origins
ASK_CORS_ORIGINS="http://localhost:3000,http://localhost:3001,https://ask.kvshvl.in"

# ============================================================================
# REFRAME CONFIGURATION
# ============================================================================

# Groq AI Configuration
REFRAME_GROQ_API_KEY="gsk_xxxxx"

# Free tier limit
REFRAME_FREE_LIMIT="5"

# Monthly cost threshold (in USD)
REFRAME_GROQ_MONTHLY_COST_THRESHOLD="50"

# CORS Origins
REFRAME_CORS_ORIGINS="http://localhost:3000,https://reframe.kvshvl.in"

# Admin Access
REFRAME_ADMIN_EMAILS="admin@kvshvl.in"

# ============================================================================
# SKETCH2BIM CONFIGURATION
# ============================================================================

# Secret Keys
SKETCH2BIM_SECRET_KEY="your-sketch2bim-secret"
SKETCH2BIM_NEXTAUTH_SECRET="your-sketch2bim-nextauth-secret"

# Groq AI Configuration
SKETCH2BIM_GROQ_API_KEY="gsk_xxxxx"

# Monthly cost threshold (in USD)
SKETCH2BIM_GROQ_MONTHLY_COST_THRESHOLD="200"

# Replicate AI (for model processing)
SKETCH2BIM_REPLICATE_API_KEY="r8_xxxxx"
SKETCH2BIM_REPLICATE_MODEL_ID="kushalsamant/sketch2bim-processor"

# BunnyCDN Storage
SKETCH2BIM_BUNNY_STORAGE_ZONE="your-storage-zone"
SKETCH2BIM_BUNNY_ACCESS_KEY="your-bunny-access-key"
SKETCH2BIM_BUNNY_CDN_HOSTNAME="your-cdn-hostname.b-cdn.net"

# CORS Origins
SKETCH2BIM_CORS_ORIGINS="http://localhost:3000,https://sketch2bim.kvshvl.in"

# Trial Configuration
SKETCH2BIM_FREE_CREDITS_LIMIT="0"  # No free credits after trial expires

# Resource Monitoring
SKETCH2BIM_DATABASE_LIMIT_MB="500"
SKETCH2BIM_REDIS_LIMIT_COMMANDS_PER_DAY="10000"
SKETCH2BIM_RESOURCE_ALERT_WARNING_THRESHOLD="80"
SKETCH2BIM_RESOURCE_ALERT_CRITICAL_THRESHOLD="95"
SKETCH2BIM_ALERT_EMAIL_ENABLED="true"
SKETCH2BIM_ALERT_EMAIL_RECIPIENTS="admin@sketch2bim.com"

# Symbol Detection (Optional - requires trained model)
SKETCH2BIM_SYMBOL_DETECTOR_ENABLED="false"
SKETCH2BIM_SYMBOL_DETECTOR_MODEL_PATH=""
SKETCH2BIM_SYMBOL_DETECTOR_CONFIDENCE="0.45"

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================

# Vercel
VERCEL_URL=""  # Automatically set by Vercel
VERCEL_ENV=""  # Automatically set by Vercel

# Render
RENDER_EXTERNAL_URL=""  # Automatically set by Render
RENDER_INSTANCE_ID=""  # Automatically set by Render

# ============================================================================
# LEGACY / DEPRECATED VARIABLES
# ============================================================================

# The following variables are NO LONGER USED and can be removed:
# - STRIPE_* (replaced with Razorpay)
# - *_GROQ_DAILY_COST_THRESHOLD (replaced with monthly thresholds)
# - LIVE_KEY_ID / LIVE_KEY_SECRET (use RAZORPAY_KEY_ID/SECRET instead)

# ============================================================================
# NOTES
# ============================================================================

# 1. Generate secrets using: openssl rand -base64 32
# 2. Never commit .env.local to version control
# 3. Keep production secrets secure in platform dashboards (Vercel/Render)
# 4. Use prefixed variables (ASK_*, SKETCH2BIM_*, etc.) for app-specific config
# 5. Use PLATFORM_* variables for shared platform-wide configuration
# 6. Monthly cost thresholds are recommended over daily to reduce monitoring overhead

